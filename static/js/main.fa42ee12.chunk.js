(this["webpackJsonpreact-shop-medium"]=this["webpackJsonpreact-shop-medium"]||[]).push([[0],{15:function(e,t,c){},17:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c.n(n),s=c(6),i=c.n(s),r=(c(15),c(7)),u=c.n(r),d=c(9),o=c(10),j=c(2);function l(e,t){var c=t.type,n=t.payload;switch(c){case"SET__BUCKET":return Object(j.a)(Object(j.a)({},e),{},{bucket:n||[],loading:!1});case"CLOSE_ALERT":return Object(j.a)(Object(j.a)({},e),{},{alertName:""});case"TOGGLE_BUCKET":return Object(j.a)(Object(j.a)({},e),{},{isBacketShow:!e.isBacketShow});case"REMOVE_FROM_BUCKET":return Object(j.a)(Object(j.a)({},e),{},{bucketItems:e.bucketItems.filter((function(e){return e.id!==n})),isInTheBucket:!1});case"ADD_TO_BUCKET":var a=null;if(!(e.bucketItems.findIndex((function(e){return e.id===n.id}))<0))return Object(j.a)(Object(j.a)({},e),{},{isBacketShow:e.isBacketShow=!0});var s=Object(j.a)(Object(j.a)({},n),{},{quantity:1});return a=[].concat(Object(o.a)(e.bucketItems),[s]),Object(j.a)(Object(j.a)({},e),{},{bucketItems:a,alertName:n.name});case"ADD__QUANTITY":var i=e.bucketItems.find((function(e){return e.id===n}));if(i){i={id:i.id,name:i.name,price:i.price,quantity:i.quantity+1,isInTheBucket:i.isInTheBucket};var r=e.bucketItems.map((function(e){return e.id===i.id?i:e}));return Object(j.a)(Object(j.a)({},e),{},{bucketItems:r})}break;case"REMOVE__QUANTITY":var u=e.bucketItems.find((function(e){return e.id===n}));if(u&&u.quantity>1){u={id:u.id,name:u.name,price:u.price,quantity:u.quantity-1,isInTheBucket:u.isInTheBucket};var d=e.bucketItems.map((function(e){return e.id===u.id?u:e}));return Object(j.a)(Object(j.a)({},e),{},{bucketItems:d})}return Object(j.a)(Object(j.a)({},e),{},{bucketItems:e.bucketItems});default:return e}}var b=c(0),m=Object(n.createContext)(),O={bucket:[],bucketItems:[],isBacketShow:!1,alertName:"",loading:!0,isInTheBucket:!1},h=function(e){var t=e.children,c=Object(n.useReducer)(l,O),a=Object(d.a)(c,2),s=a[0],i=a[1];return s.setBucket=function(e){i({type:"SET__BUCKET",payload:e})},s.closeAlert=function(){i({type:"CLOSE_ALERT"})},s.removeFromBucket=function(e){i({type:"REMOVE_FROM_BUCKET",payload:e})},s.addToBucket=function(e){i({type:"ADD_TO_BUCKET",payload:e})},s.addQuantity=function(e){i({type:"ADD__QUANTITY",payload:e})},s.removeQuantity=function(e){i({type:"REMOVE__QUANTITY",payload:e})},s.handleBacketShow=function(){i({type:"TOGGLE_BUCKET"})},Object(b.jsx)(m.Provider,{value:s,children:t})};var _=function(){var e=Object(n.useContext)(m),t=e.bucketItems,c=void 0===t?[]:t,a=e.handleBacketShow;return Object(b.jsxs)("div",{onClick:a,className:"bucket",children:[Object(b.jsx)("span",{className:"bucket__items",children:c.length}),Object(b.jsx)("i",{className:"fab fa-shopify"})]})};var x=function(){return Object(b.jsx)("header",{className:"header",children:Object(b.jsx)("div",{className:"container",children:Object(b.jsxs)("div",{className:u.a.header__container,children:[Object(b.jsx)("div",{className:"logo",children:Object(b.jsx)("h3",{children:"Serching Films"})}),Object(b.jsx)("div",{className:"header__nav",children:Object(b.jsx)(_,{})})]})})})},f=c.p+"static/media/preloader.1b42d9e1.svg";var k=function(){return Object(b.jsx)("div",{className:"preloader",children:Object(b.jsx)("img",{src:f,alt:"Preloader"})})};var p=function(e){var t=e.goods,c=Object(n.useContext)(m),a=c.addToBucket,s=(c.bucket,c.bucketItems),i=0;return Object(b.jsxs)("div",{className:"card",children:[Object(b.jsx)("div",{className:"card__photo",children:Object(b.jsx)("img",{src:t.granted[0].images.full_background,alt:t.granted[0].name})}),Object(b.jsxs)("div",{className:"cards__description",children:[Object(b.jsx)("div",{className:"card__name",children:t.granted[0].name}),Object(b.jsx)("div",{className:"card__description",children:t.granted[0].description})]}),Object(b.jsxs)("div",{className:"card__price",children:[Object(b.jsxs)("button",{onClick:function(){a({id:t.mainId,name:t.granted[0].name,price:t.price.finalPrice,isInTheBucket:!0})},className:"card__btn",children:[s.forEach((function(e){return e.id===t.mainId&&(i=1),e})),i?Object(b.jsx)("span",{children:"Go to the bucket"}):Object(b.jsx)("span",{children:"Buy"})]}),Object(b.jsxs)("span",{children:[t.price.finalPrice," $"]})]})]})};var v=function(){var e=Object(n.useContext)(m).bucket,t=void 0===e?[]:e;return t.length?Object(b.jsx)("div",{className:"main__container",children:t.map((function(e){return Object(b.jsx)(p,{goods:e},e.mainId)}))}):Object(b.jsx)("div",{className:"not__found",children:Object(b.jsx)("span",{children:"Don't have goods with such name"})})};var N=function(){var e=Object(n.useContext)(m),t=e.loading,c=e.setBucket;return Object(n.useEffect)((function(){fetch("https://fortniteapi.io/v2/shop?lang=en",{headers:{Authorization:"74afc8dd-34d19f8a-a9c7c3af-316ad40b\t"}}).then((function(e){return e.json()})).then((function(e){c(e.shop)})).catch((function(e){return console.log(e)}))}),[]),Object(b.jsx)("main",{className:"main",children:t?Object(b.jsx)(k,{}):Object(b.jsx)("div",{className:"main",children:Object(b.jsx)("div",{className:"container",children:Object(b.jsx)(v,{})})})})},T=c(8),B=c.n(T);var I=function(){return Object(b.jsx)("footer",{className:"footer",children:Object(b.jsx)("div",{className:B.a.footer__block,children:"\xa9 All rights reserved"})})};var y=function(e){var t=e.id,c=e.name,a=e.price,s=e.quantity,i=Object(n.useContext)(m),r=i.removeFromBucket,u=i.addQuantity,d=i.removeQuantity;return Object(b.jsxs)("li",{className:"bucket__item",children:[Object(b.jsxs)("span",{children:[c," x ",s," = ",a*s]}),Object(b.jsxs)("span",{className:"bucket__item__container",children:[Object(b.jsx)("button",{className:"bucket__item__minus",onClick:function(){return d(t)},children:"-"}),Object(b.jsx)("span",{className:"bucket__item__count",children:s}),Object(b.jsx)("button",{className:"bucket__item__plus",onClick:function(){return u(t)},children:"+"})]}),Object(b.jsx)("span",{className:"bucket__delete",onClick:function(){return r(t)},children:Object(b.jsx)("i",{className:"fas fa-times"})})]})};var E=function(){var e=Object(n.useContext)(m),t=e.bucketItems,c=void 0===t?[]:t,a=e.handleBacketShow,s=c.reduce((function(e,t){return e+t.price*t.quantity}),0);return Object(b.jsx)("div",{className:"bucket__window",children:Object(b.jsx)("div",{className:"bucket__container",children:Object(b.jsxs)("ul",{className:"bucket__list",children:[Object(b.jsx)("div",{className:"close__bucket",onClick:a,children:Object(b.jsx)("i",{className:"fas fa-times"})}),Object(b.jsx)("li",{className:"bucket__name",children:"Bucket"}),c.length?c.map((function(e){return Object(b.jsx)(y,Object(j.a)({},e),e.id)})):Object(b.jsx)("li",{className:"bucket__item",children:Object(b.jsx)("span",{children:"Bucket is empty"})}),Object(b.jsxs)("li",{className:"bucket__price",children:[Object(b.jsx)("span",{children:"Total price:"}),Object(b.jsxs)("span",{children:[s," $"]})]})]})})})};var g=function(){var e=Object(n.useContext)(m),t=e.alertName,c=e.closeAlert;return Object(n.useEffect)((function(){var e=setTimeout(c,3e3);return function(){clearTimeout(e)}}),[t]),Object(b.jsx)("div",{className:"alert__container",children:Object(b.jsxs)("div",{className:"alert",children:[t," add in the bucket"]})})};function C(){var e=Object(n.useContext)(m),t=e.alertName,c=e.isBacketShow;return Object(b.jsxs)(b.Fragment,{children:[t&&Object(b.jsx)(g,{}),c&&Object(b.jsx)(E,{}),Object(b.jsx)(x,{}),Object(b.jsx)(N,{}),Object(b.jsx)(I,{})]})}i.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(h,{children:Object(b.jsx)(C,{})})}),document.getElementById("root"))},7:function(e,t,c){e.exports={header__container:"Header_header__container__1qHz9"}},8:function(e,t,c){e.exports={footer__block:"Footer_footer__block__qoW02"}}},[[17,1,2]]]);
//# sourceMappingURL=main.fa42ee12.chunk.js.map